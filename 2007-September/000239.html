<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-devel] Mapnik crash with current SVN source
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-devel/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20Mapnik%20crash%20with%20current%20SVN%20source&In-Reply-To=%3C20070910102944.43540eac%40frodo.mittelerde%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000238.html">
   <LINK REL="Next"  HREF="000240.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-devel] Mapnik crash with current SVN source</H1>
    <B>Andreas Volz</B> 
    <A HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20Mapnik%20crash%20with%20current%20SVN%20source&In-Reply-To=%3C20070910102944.43540eac%40frodo.mittelerde%3E"
       TITLE="[Mapnik-devel] Mapnik crash with current SVN source">lists at brachttal.net
       </A><BR>
    <I>Mon Sep 10 10:29:44 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000238.html">[Mapnik-devel] Mapnik crash with current SVN source
</A></li>
        <LI>Next message: <A HREF="000240.html">[Mapnik-devel] Mapnik crash with current SVN source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#239">[ date ]</a>
              <a href="thread.html#239">[ thread ]</a>
              <a href="subject.html#239">[ subject ]</a>
              <a href="author.html#239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am Mon, 10 Sep 2007 08:53:55 +0100 schrieb Artem Pavlenko:

&gt;<i> 
</I>&gt;<i> On 8 Sep 2007, at 11:51, Andreas Volz wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Am Sat, 08 Sep 2007 11:34:22 +0100 schrieb Jon Burgess:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; I've seen similar looking crashes when I've failed to recompile the
</I>&gt;<i> &gt;&gt; postgis plugin, so that you end up with a mismatch between the
</I>&gt;<i> &gt;&gt; plugin and the main code. Try comparing the timestamps of the files
</I>&gt;<i> &gt;&gt; in /usr/local/lib/mapnik/input/ and
</I>&gt;<i> &gt;&gt; with /usr/local/lib/libmapnik.so
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; There is evidence in the bactrace that the mapnik.so has debug  
</I>&gt;<i> &gt;&gt; symbols
</I>&gt;<i> &gt;&gt; whereas the postgis.input has none:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; #3 0xb5eb8457 in create ()
</I>&gt;<i> &gt;&gt; from /usr/local/lib/mapnik/input/postgis.input #4 0xb7a29a9c in
</I>&gt;<i> &gt;&gt; mapnik::datasource_cache::create (params=@0xbfa30970) at
</I>&gt;<i> &gt;&gt; src/datasource_cache.cpp:81
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You're right. The postgis.input is from may and the libmapnik.so
</I>&gt;<i> &gt; from yesterday. Seems postgis.input didn't recompile for some time.
</I>&gt;<i> &gt; Any ideas why this happens? Should I start scons in this
</I>&gt;<i> &gt; subdirectories by hand?
</I>&gt;<i> Maybe you didn't specify PGSQL_{INCLUDES,LIBS} ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; BTW: Why not using GNU autotools? I like and know them much
</I>&gt;<i> &gt; more. :-)
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> Mapnik used to use Autotools ;-)
</I>
Ok, I finished my port to autotools and it does at least compile. I
didn't test it yet. But I'll continue and then show you the result.
Perhaps it's an option to support both or maintain it in another branch
with only autotools project files included and merging both each time.
I'm not sure...

I'll remove (at least with configure option) the fonts and libagg
build and installation. It's hard to get packages into distributions
(e.g. Gentoo) with subpackages included. There're packages for libagg
and dejavu fonts on Gentoo and Ubuntu.

&gt;<i> &gt; I thought about porting it to autotools...
</I>&gt;<i> If you're building on Linux/Unix , using Autotools might be a good  
</I>&gt;<i> solution. But about native toolchain on win32?
</I>&gt;<i> There are also other building systems  :  CMake, Boost.Build.v2
</I>
I like autotools because the Linux integration is very good and clean. 

I created a win32 library in the past and used autotools without
problems. Ok, it's not &quot;native&quot;, but what is &quot;native&quot;. :-)

Simply installing mingw and msys on win32 did it. See here the
mingw installation instruction for another library that I maintain:

<A HREF="http://makewiki.aleppax.it/pmwiki/pmwiki.php/Windows/MinGW">http://makewiki.aleppax.it/pmwiki/pmwiki.php/Windows/MinGW</A>

Sounds easy not? :-)

regards
Andreas

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000238.html">[Mapnik-devel] Mapnik crash with current SVN source
</A></li>
	<LI>Next message: <A HREF="000240.html">[Mapnik-devel] Mapnik crash with current SVN source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#239">[ date ]</a>
              <a href="thread.html#239">[ thread ]</a>
              <a href="subject.html#239">[ subject ]</a>
              <a href="author.html#239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-devel">More information about the Mapnik-devel
mailing list</a><br>
</body></html>
