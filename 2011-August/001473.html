<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-devel] GSoC - Text formating
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-devel/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20GSoC%20-%20Text%20formating&In-Reply-To=%3Cop.vz96dwxvi35s77%40nx7400.uni-regensburg.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001472.html">
   <LINK REL="Next"  HREF="001474.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-devel] GSoC - Text formating</H1>
    <B>Hermann Kraus</B> 
    <A HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20GSoC%20-%20Text%20formating&In-Reply-To=%3Cop.vz96dwxvi35s77%40nx7400.uni-regensburg.de%3E"
       TITLE="[Mapnik-devel] GSoC - Text formating">herm at scribus.info
       </A><BR>
    <I>Tue Aug 16 02:30:58 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001472.html">[Mapnik-devel] Mapnik and Tilecache &quot;No module named Mapnik&quot;
</A></li>
        <LI>Next message: <A HREF="001474.html">[Mapnik-devel] code bloat issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1473">[ date ]</a>
              <a href="thread.html#1473">[ thread ]</a>
              <a href="subject.html#1473">[ subject ]</a>
              <a href="author.html#1473">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello!

Last week I was working on finishing the text formating code.
After having a close look at placement_finder.cpp and considering  
reimplementing it I decided it would work with only minor changes and so  
kept it. Now each char has an associated set of properties which is passed  
all the way through the formating and placement code till it reaches the  
rendering code.

Rendering works now, but it is only implemented for AGG. I will implement  
support for other renderers soon. This should not be a problem as I  
reduced the complexity of the rendering function. (117 vs. 43 lines) Most  
code that is common to all renders is now moved out of this function.

I also updated the TextSymbolizer documentation in the wiki  
(<A HREF="http://trac.mapnik.org/wiki/TextSymbolizer">http://trac.mapnik.org/wiki/TextSymbolizer</A>) because some options were  
undocumentend or wrong.

The new TextSymbolizer syntax looks like this:
&lt;TextSymbolizer face-name=&quot;DejaVu Sans Book&quot; size=&quot;16&quot; placement=&quot;point&quot;  
dx=&quot;0&quot; dy=&quot;8&quot; fill=&quot;blue&quot; &gt;
'default color'&lt;Format fill=&quot;red&quot;&gt;' red text '&lt;/Format&gt;[name]&lt;Format  
fill=&quot;green&quot;&gt;' green'&lt;Format bold=&quot;true&quot; size=&quot;20&quot;&gt;' large '&lt;/Format&gt;'text  
'&lt;/Format&gt;'normal text again'
&lt;/TextSymbolizer&gt;

name option is removed and all the text goes to the content section. While  
I think my code should not be merged for mapnik2 to avoid further delays I  
think a compatibility layer should be added.
So &lt;TextSymbolizer name=&quot;abc&quot; /&gt; and &lt;TextSymbolizer&gt;abc&lt;/TextSymbolizer&gt;  
are both valid but the first one print a deprecation warning.

Hermann

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001472.html">[Mapnik-devel] Mapnik and Tilecache &quot;No module named Mapnik&quot;
</A></li>
	<LI>Next message: <A HREF="001474.html">[Mapnik-devel] code bloat issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1473">[ date ]</a>
              <a href="thread.html#1473">[ thread ]</a>
              <a href="subject.html#1473">[ subject ]</a>
              <a href="author.html#1473">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-devel">More information about the Mapnik-devel
mailing list</a><br>
</body></html>
