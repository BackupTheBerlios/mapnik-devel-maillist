<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-devel] Cann't run mapnik rundemo.cpp on visual studio	2005
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-devel/2011-April/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20Cann%27t%20run%20mapnik%20rundemo.cpp%20on%20visual%20studio%0A%092005&In-Reply-To=%3CBANLkTi%3DLQrcGo_fb1UdsfgfU7Wbfg6ypCQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001361.html">
   <LINK REL="Next"  HREF="001362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-devel] Cann't run mapnik rundemo.cpp on visual studio	2005</H1>
    <B>Roel Vanhout</B> 
    <A HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20Cann%27t%20run%20mapnik%20rundemo.cpp%20on%20visual%20studio%0A%092005&In-Reply-To=%3CBANLkTi%3DLQrcGo_fb1UdsfgfU7Wbfg6ypCQ%40mail.gmail.com%3E"
       TITLE="[Mapnik-devel] Cann't run mapnik rundemo.cpp on visual studio	2005">roel.vanhout at gmail.com
       </A><BR>
    <I>Mon Apr  4 12:14:57 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001361.html">[Mapnik-devel] Cann't run mapnik rundemo.cpp on visual studio 2005
</A></li>
        <LI>Next message: <A HREF="001362.html">[Mapnik-devel] Mapnik-Stylefile vs. SLD Version 1.0.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1363">[ date ]</a>
              <a href="thread.html#1363">[ thread ]</a>
              <a href="subject.html#1363">[ subject ]</a>
              <a href="author.html#1363">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I don't recommend trying to get it all to work with pre-build
binaries. Most binaries you will find online of third-party libraries
do not document with which flags they are build, or with which
compiler etc; and if they use different flags, it won't work anyway.
Although theoretically anything is possible, in practice you're not
going to be able to get it to work (things like SECURE_CRT, which
manifest to use, etc).

I documented how to build from source for all libraries on
<A HREF="http://trac.mapnik.org/wiki/BuildingOnWindows">http://trac.mapnik.org/wiki/BuildingOnWindows</A> . It's not for the faint
of heart, especially some PITA libraries like icu and libtool. Also
check my tickets in trac for some patches to make things build with
MSVC. I only recommend spending time on it if you're already
experienced with MSVC and troubleshooting building/linking issues with
it.

cheers,

roel



On Mon, Apr 4, 2011 at 10:30 AM, rakib rakib &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-devel">rakib114 at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I am new to mapnik. I successfully installed mapnik but I want it to visual
</I>&gt;<i> studio 2005. So I tried to run the C++ demo on Visual studio project. What I
</I>&gt;<i> did is as follows:
</I>&gt;<i>
</I>&gt;<i> Installation:
</I>&gt;<i>
</I>&gt;<i> I installed mapnik 0.7.1 with python 2.6 on Vista as per
</I>&gt;<i> <A HREF="http://trac.mapnik.org/wiki/WindowsInstallation.">http://trac.mapnik.org/wiki/WindowsInstallation.</A>
</I>&gt;<i>
</I>&gt;<i> I made a directory D:\mapnik installation for visual studio 2005 and copy
</I>&gt;<i> mapnik 0.7.1 here. I had an entry in PATH variable: D:\mapnik installation
</I>&gt;<i> for visual studio 2005\mapnik-0.7.1\lib and my PYTHONPATH is set to
</I>&gt;<i> D:\mapnik installation for visual studio
</I>&gt;<i> 2005\mapnik-0.7.1\python\2.6\site-packages
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Third party library:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 1.&#160;&#160;&#160;&#160;&#160;&#160;&#160; freetype-2.4.4
</I>&gt;<i>
</I>&gt;<i> 2.&#160;&#160;&#160;&#160;&#160;&#160;&#160; icu
</I>&gt;<i>
</I>&gt;<i> 3.&#160;&#160;&#160;&#160;&#160;&#160;&#160; libtool-1.5.26
</I>&gt;<i>
</I>&gt;<i> 4.&#160;&#160;&#160;&#160;&#160;&#160;&#160; boost_1_46_1
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Procedure:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 1.&#160;&#160;&#160;&#160;&#160;&#160;&#160; I created a new Win32 Console Application named MapnikApp in the
</I>&gt;<i> above directory.
</I>&gt;<i>
</I>&gt;<i> 2.&#160;&#160;&#160;&#160;&#160;&#160;&#160; I tried to run reundemo.cpp in mapnik-0.7.1. I copied the content
</I>&gt;<i> of this file to our MapnikApp.cpp
</I>&gt;<i>
</I>&gt;<i> 3.&#160;&#160;&#160;&#160;&#160;&#160;&#160; I included the following to
</I>&gt;<i> Project-&gt;Properties-&gt;C/C++-&gt;General-&gt;Additional Include Directories.
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; D:\mapnik installation for visual studio 2005\mapnik-0.7.1\include
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; D:\mapnik installation for visual studio 2005\boost_1_46_1
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; D:\mapnik installation for visual studio 2005\icu\include
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; D:\mapnik installation for visual studio 2005\libtool-1.5.26\include
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; D:\mapnik installation for visual studio 2005\freetype-2.4.4\include
</I>&gt;<i>
</I>&gt;<i> 4.&#160;&#160;&#160;&#160;&#160;&#160;&#160; I added the associate lib directory to
</I>&gt;<i> Project-&gt;Properties-&gt;Linker-&gt;General-&gt;Additional Library Directories
</I>&gt;<i>
</I>&gt;<i> 5.&#160;&#160;&#160;&#160;&#160;&#160;&#160; I added all *.lib and *.dll of mapnik-0.7.1\lib to project.
</I>&gt;<i>
</I>&gt;<i> 6.&#160;&#160;&#160;&#160;&#160;&#160;&#160; After running the project (debug, win32) I got the following
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Unhandled exception at 0x1002cbe5
</I>&gt;<i> (mapnik.dll) in MapnikApp.exe: 0xC0000005: Access violation reading location
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0xcccccccc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; In Release Win32 I got the following.
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; std::exception: vector&lt;T&gt; too long when it tried to execute
</I>&gt;<i> m.insert_style.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; For simplicity I tried to run the following
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; Map m(800,600);
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; m.set_background(color_factory::from_string(&quot;white&quot;));
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; m.zoomToBox(Envelope&lt;double&gt;(1405120.04127408,-247003.813399447,
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1706357.31328276,-25098.593149577));
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; Image32 buf(m.getWidth(),m.getHeight());
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; agg_renderer&lt;Image32&gt; ren(m,buf);
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; ren.apply();
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;I got the following error.
</I>&gt;<i>
</I>&gt;<i> A buffer overrun has occurred in MapnikApp.exe which has corrupted the
</I>&gt;<i> program's internal state. Press Break to debug the program or Continue to
</I>&gt;<i> terminate the program.
</I>&gt;<i>
</I>&gt;<i> I need help how to solve it.
</I>&gt;<i>
</I>&gt;<i> With best regards,
</I>&gt;<i> Rakib
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mapnik-devel mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-devel">Mapnik-devel at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-devel">https://lists.berlios.de/mailman/listinfo/mapnik-devel</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001361.html">[Mapnik-devel] Cann't run mapnik rundemo.cpp on visual studio 2005
</A></li>
	<LI>Next message: <A HREF="001362.html">[Mapnik-devel] Mapnik-Stylefile vs. SLD Version 1.0.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1363">[ date ]</a>
              <a href="thread.html#1363">[ thread ]</a>
              <a href="subject.html#1363">[ subject ]</a>
              <a href="author.html#1363">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-devel">More information about the Mapnik-devel
mailing list</a><br>
</body></html>
