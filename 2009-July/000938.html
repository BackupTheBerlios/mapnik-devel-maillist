<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-devel] Patch for improved text rendering
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-devel/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20Patch%20for%20improved%20text%20rendering&In-Reply-To=%3C20090719184706.GA29689%40eldorado.topf.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000940.html">
   <LINK REL="Next"  HREF="000939.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-devel] Patch for improved text rendering</H1>
    <B>Jochen Topf</B> 
    <A HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20Patch%20for%20improved%20text%20rendering&In-Reply-To=%3C20090719184706.GA29689%40eldorado.topf.org%3E"
       TITLE="[Mapnik-devel] Patch for improved text rendering">jochen at remote.org
       </A><BR>
    <I>Sun Jul 19 20:47:06 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000940.html">[Mapnik-devel] Complex PostGIS queries - patch
</A></li>
        <LI>Next message: <A HREF="000939.html">[Mapnik-devel] Patch for improved text rendering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#938">[ date ]</a>
              <a href="thread.html#938">[ thread ]</a>
              <a href="subject.html#938">[ subject ]</a>
              <a href="author.html#938">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Attached is a patch for some text rendering improvements. The TextSymbolizer
gets the following new parameters:

* text_convert=&quot;none|toupper|tolower&quot;
  Convert all text to upper/lower case before rendering. &quot;none&quot; doesn't do
  anything with the text and is the default. Works for labels along lines
  or at points.

* line_spacing=&quot;&lt;number&gt;&quot;
  Add this many pixels space between two lines in text labels that have
  been broken into several lines. Default is 0. Doesn't do anything for
  labels along lines.

* character_spacing=&quot;&lt;number&gt;&quot;
  Add this many pixels space between two characters in a text. Default is 0.
  Currently only works for text labels on point geometries. This should
  also be implemented for labels along lines, but I'll leave that for
  another day.

* wrap_character=&quot;&lt;character&gt;&quot;
  Instead of breaking text into lines on spaces, use this character. This
  is useful, when you want to make sure that labels are broken at the right
  spot. Note that you'll probably want to make wrap_width small so that
  your lines are actually broken, otherwise you'll see the wrap_character
  in the output. Default is ' ' (space). Doesn't do anything for labels
  along lines.

I have added those parameters to the load_map and save_map functions and
implemented the functionality. I have *not* added this to the python
bindings, because I don't know how they work.

Jochen
-- 
Jochen Topf  <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-devel">jochen at remote.org</A>  <A HREF="http://www.remote.org/jochen/">http://www.remote.org/jochen/</A>  +49-721-388298
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mapnik-text.diff
Type: text/x-diff
Size: 14638 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mapnik-devel/attachments/20090719/4d73abc1/attachment.diff">https://lists.berlios.de/pipermail/mapnik-devel/attachments/20090719/4d73abc1/attachment.diff</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000940.html">[Mapnik-devel] Complex PostGIS queries - patch
</A></li>
	<LI>Next message: <A HREF="000939.html">[Mapnik-devel] Patch for improved text rendering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#938">[ date ]</a>
              <a href="thread.html#938">[ thread ]</a>
              <a href="subject.html#938">[ subject ]</a>
              <a href="author.html#938">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-devel">More information about the Mapnik-devel
mailing list</a><br>
</body></html>
