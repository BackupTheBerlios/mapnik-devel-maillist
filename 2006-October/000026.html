<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-devel] Text wrapping patch
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-devel/2006-October/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20Text%20wrapping%20patch&In-Reply-To=%3C45400C0D.5070509%40onetrackmind.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000025.html">
   <LINK REL="Next"  HREF="000027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-devel] Text wrapping patch</H1>
    <B>Robert Coup</B> 
    <A HREF="mailto:mapnik-devel%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-devel%5D%20Text%20wrapping%20patch&In-Reply-To=%3C45400C0D.5070509%40onetrackmind.co.nz%3E"
       TITLE="[Mapnik-devel] Text wrapping patch">robert.coup at onetrackmind.co.nz
       </A><BR>
    <I>Thu Oct 26 03:14:53 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000025.html">[Mapnik-devel] New Mapnik Features
</A></li>
        <LI>Next message: <A HREF="000027.html">[Mapnik-devel] Text wrapping patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26">[ date ]</a>
              <a href="thread.html#26">[ thread ]</a>
              <a href="subject.html#26">[ subject ]</a>
              <a href="author.html#26">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

Patch for text wrapping enclosed - see notes below.

Thanks,

Robert Coup

-- 
One Track Mind Ltd.
PO Box 1604, Shortland St, Auckland, New Zealand
Phone +64-9-966 0433 Mobile +64-21-572 632
Web <A HREF="http://www.onetrackmind.co.nz">http://www.onetrackmind.co.nz</A> 



-------- Original Message --------
Subject: 	Mapnik text wrapping patch
Date: 	Thu, 26 Oct 2006 13:47:39 +1300
From: 	Toby Collett &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-devel">toby.collett at onetrackmind.co.nz</A>&gt;
To: 	Robert Coup &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-devel">robert.coup at onetrackmind.co.nz</A>&gt;
References: 	&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-devel">453E8318.7070805 at onetrackmind.co.nz</A>&gt;



The attached patch (against SVN head 26/10) adds the
ability to wrap text either at a fixed width or with a target
width/height ratio. It will only break words on spaces and will wrap
below the wrap width rather than letting words flow over it.

The ratio targets are naive with no search being performed, but this
does mean it should run fairly fast. 

Non breaking spaces should be respected, hyphens are not considered a
break point at this stage (feel free to add a list of breakable
characters...)

Below is a simple example of setting the wrap width and ratio. Both are 
optional. If the ratio is set then the width is taken as the minimum 
width that text must exceed before wrapping, if ratio is not set the 
wrap_width is used directly.

        txt = TextSymbolizer('name', 'Bitstream Vera Sans Roman', 10, Color('black'))
        txt.halo_fill = Color('white')
        txt.halo_radius = 1
        txt.wrap_width = 30
        txt.text_ratio = 20

Toby

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mapnik_text_wrap.diff
Type: text/x-patch
Size: 13741 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mapnik-devel/attachments/20061026/1f880b42/attachment.bin">https://lists.berlios.de/pipermail/mapnik-devel/attachments/20061026/1f880b42/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000025.html">[Mapnik-devel] New Mapnik Features
</A></li>
	<LI>Next message: <A HREF="000027.html">[Mapnik-devel] Text wrapping patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26">[ date ]</a>
              <a href="thread.html#26">[ thread ]</a>
              <a href="subject.html#26">[ subject ]</a>
              <a href="author.html#26">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-devel">More information about the Mapnik-devel
mailing list</a><br>
</body></html>
